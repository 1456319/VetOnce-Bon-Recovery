
 RUN  v3.2.4 /app

 ❯ src/utils/PythonRandomProvider.test.ts (2 tests | 1 failed) 1266ms
   ✓ PythonRandomProvider > should produce deterministic random numbers based on a seed ("Golden Test")  747ms
   × PythonRandomProvider > should shuffle an array deterministically 517ms
     → expected [ 10, 2, 3, 7, 8, 1, 5, 6, 9, 4 ] to deeply equal [ 9, 2, 6, 1, 8, 3, 10, 5, 4, 7 ]
 ❯ app/__tests__/bon.test.ts (3 tests | 2 failed) 1661ms
   × Text Augmentation Functions > applyWordScrambling > should scramble the middle of words longer than 3 characters deterministically 667ms
     → expected 'The qicuk borwn fox jmups oevr the lz…' to deeply equal 'The qciuk bworn fox jupms oevr the la…'
   ✓ Text Augmentation Functions > applyRandomCapitalization > should randomly capitalize and decapitalize letters deterministically  505ms
   × Text Augmentation Functions > applyAsciiNoising > should add ASCII noise to the text deterministically 485ms
     → expected 'Sid!pvhdj!csnvo eny!itlqt!pufs!ugd!mb…' to deeply equal 'Sid!pvhdl!aqnvo!epy!kvnor pwds!sif!kb…'
 ✓ app/__tests__/api.test.ts (2 tests) 11069ms
   ✓ API Route: /api/generate > should process a valid request and return the best augmented prompt  11062ms

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  app/__tests__/bon.test.ts > Text Augmentation Functions > applyWordScrambling > should scramble the middle of words longer than 3 characters deterministically
AssertionError: expected 'The qicuk borwn fox jmups oevr the lz…' to deeply equal 'The qciuk bworn fox jupms oevr the la…'

Expected: [32m"The q[7mc[27miuk b[7mw[27morn fox jup[7mm[27ms oevr the l[7ma[27mzy dog"[39m
Received: [31m"The qi[7mc[27muk bor[7mw[27mn fox j[7mm[27mups oevr the lz[7ma[27my dog"[39m

 ❯ app/__tests__/bon.test.ts:16:25
     14|       const scrambled = applyWordScrambling(text, 1.0, rng);
     15|       const goldenScrambled = 'The qciuk bworn fox jupms oevr the lazy…
     16|       expect(scrambled).toEqual(goldenScrambled);
       |                         ^
     17|     });
     18|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  app/__tests__/bon.test.ts > Text Augmentation Functions > applyAsciiNoising > should add ASCII noise to the text deterministically
AssertionError: expected 'Sid!pvhdj!csnvo eny!itlqt!pufs!ugd!mb…' to deeply equal 'Sid!pvhdl!aqnvo!epy!kvnor pwds!sif!kb…'

Expected: [32m"Sid!pvhd[7ml!aqnvo!epy!kvnor pwds!sif!kby[27mx!en[7mf[27m"[39m
Received: [31m"Sid!pvhd[7mj!csnvo eny!itlqt!pufs!ugd!mb{[27mx!en[7mh[27m"[39m

 ❯ app/__tests__/bon.test.ts:36:22
     34|       const noised = applyAsciiNoising(text, 1.0, rng);
     35|       const goldenNoised = 'Sid!pvhdl!aqnvo!epy!kvnor pwds!sif!kbyx!en…
     36|       expect(noised).toEqual(goldenNoised);
       |                      ^
     37|     });
     38|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  src/utils/PythonRandomProvider.test.ts > PythonRandomProvider > should shuffle an array deterministically
AssertionError: expected [ 10, 2, 3, 7, 8, 1, 5, 6, 9, 4 ] to deeply equal [ 9, 2, 6, 1, 8, 3, 10, 5, 4, 7 ]

[32m- Expected[39m
[31m+ Received[39m

[2m  [[22m
[32m-   9,[39m
[31m+   10,[39m
[2m    2,[22m
[32m-   6,[39m
[32m-   1,[39m
[32m-   8,[39m
[2m    3,[22m
[32m-   10,[39m
[31m+   7,[39m
[31m+   8,[39m
[31m+   1,[39m
[2m    5,[22m
[31m+   6,[39m
[31m+   9,[39m
[2m    4,[22m
[32m-   7,[39m
[2m  ][22m

 ❯ src/utils/PythonRandomProvider.test.ts:35:17
     33|     rng.np_shuffle(arr);
     34|
     35|     expect(arr).toEqual(expectedShuffledArr);
       |                 ^
     36|   });
     37| });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯


 Test Files  2 failed | 1 passed (3)
      Tests  3 failed | 4 passed (7)
   Start at  17:48:30
   Duration  12.64s (transform 346ms, setup 0ms, collect 723ms, tests 14.00s, environment 2.58s, prepare 381ms)
